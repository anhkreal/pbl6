{"openapi":"3.1.0","info":{"title":"ğŸ¤– Há»‡ Thá»‘ng Nháº­n Diá»‡n KhuÃ´n Máº·t vá»›i MySQL Authentication","description":"\n    ## ğŸ¯ Giá»›i Thiá»‡u Há»‡ Thá»‘ng\n    \napp.include_router(checkout.router)\n    **Há»‡ thá»‘ng nháº­n diá»‡n khuÃ´n máº·t AI tiÃªn tiáº¿n** sá»­ dá»¥ng cÃ´ng nghá»‡ deep learning vÃ  FAISS Ä‘á»ƒ:\n    \n    ### ğŸš€ TÃ­nh NÄƒng ChÃ­nh\n    - **ğŸ” TÃ¬m kiáº¿m khuÃ´n máº·t**: TÃ¬m ngÆ°á»i giá»‘ng nháº¥t tá»« database\n    - **â• Quáº£n lÃ½ dá»¯ liá»‡u**: ThÃªm, sá»­a, xÃ³a thÃ´ng tin ngÆ°á»i dÃ¹ng\n    - **ğŸ“Š Thá»‘ng kÃª**: Xem thÃ´ng tin database vÃ  hiá»‡u suáº¥t\n    - **ğŸ” Báº£o máº­t**: ÄÄƒng nháº­p MySQL Ä‘á»ƒ báº£o vá»‡ cÃ¡c thao tÃ¡c nháº¡y cáº£m\n    \n    ### ğŸ” Há»‡ Thá»‘ng Authentication\n    **MySQL Database Authentication:**\n    - ğŸ  **Public APIs**: TÃ¬m kiáº¿m khuÃ´n máº·t, xem thÃ´ng tin (khÃ´ng cáº§n Ä‘Äƒng nháº­p)\n    - ğŸ”’ **Protected APIs**: ThÃªm, sá»­a, xÃ³a dá»¯ liá»‡u (yÃªu cáº§u Ä‘Äƒng nháº­p MySQL)\n    \n    ### ğŸ›¡ï¸ Authentication & Authorization\n    \n    **MySQL Token Authentication:**\n    - Sá»­ dá»¥ng `/auth/login` Ä‘á»ƒ Ä‘Äƒng nháº­p vá»›i username/password tá»« báº£ng `taikhoan`\n    - Nháº­n session token Ä‘á»ƒ sá»­ dá»¥ng cho protected APIs\n    - Token Ä‘Æ°á»£c validate qua MySQL database\n    - Logout vá»›i `/auth/logout` Ä‘á»ƒ clear session\n    \n    **Security Model:**\n    - ğŸŸ¢ **Public**: Query, search, health check (khÃ´ng cáº§n Ä‘Äƒng nháº­p)\n    - ğŸ”’ **Protected**: Add, edit, delete (cáº§n Ä‘Äƒng nháº­p qua báº£ng taikhoan MySQL)\n    \n    **YÃªu Cáº§u Authentication:**\n    Äáº£m báº£o pháº£i Ä‘Äƒng nháº­p thÃ´ng qua báº£ng taikhoan MySQL má»›i Ä‘Æ°á»£c cÃ¡c tÃ¡c vá»¥ thÃªm/sá»­a/xÃ³a MySQL/FAISS, cÃ²n truy váº¥n khá»i cáº§n\n    \n    ### ğŸ“ HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng\n    1. **TÃ¬m kiáº¿m khuÃ´n máº·t**: DÃ¹ng `/query` vá»›i áº£nh upload\n    2. **ÄÄƒng nháº­p**: POST `/auth/login` vá»›i username/password MySQL\n    3. **Quáº£n lÃ½ dá»¯ liá»‡u**: Sau khi Ä‘Äƒng nháº­p, cÃ³ thá»ƒ add/edit/delete\n    4. **ÄÄƒng xuáº¥t**: POST `/auth/logout` Ä‘á»ƒ káº¿t thÃºc session\n    \n    ### ğŸ› ï¸ CÃ´ng Nghá»‡ Sá»­ Dá»¥ng\n    - **AI Framework**: ArcFace, FAISS Vector Search\n    - **Backend**: FastAPI, Python\n    - **Database**: MySQL Authentication\n    - **Security**: Session-based Authentication vá»›i Bearer tokens\n    ","contact":{"name":"Face Recognition API Support","email":"support@faceapi.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"2.0.0"},"paths":{"/auth/login":{"post":{"tags":["ğŸ” Authentication","ğŸ” MySQL Authentication"],"summary":"ÄÄƒng nháº­p vá»›i MySQL account","description":"**ÄÄƒng nháº­p há»‡ thá»‘ng báº±ng tÃ i khoáº£n MySQL**\n    \n    API nÃ y cho phÃ©p:\n    - ğŸ” ÄÄƒng nháº­p báº±ng username/password tá»« table `taikhoan`\n    - ğŸª Táº¡o session cookie tá»± Ä‘á»™ng\n    - â° Session cÃ³ hiá»‡u lá»±c 24 giá»\n    \n    **Sau khi Ä‘Äƒng nháº­p thÃ nh cÃ´ng:**\n    - Cookie `session_token` sáº½ Ä‘Æ°á»£c set tá»± Ä‘á»™ng\n    - CÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c Protected APIs (add, edit, delete)\n    \n    **CÃ¡ch sá»­ dá»¥ng:**\n    - Input: username vÃ  password\n    - Output: ThÃ´ng tin Ä‘Äƒng nháº­p + session cookie","operationId":"login_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/logout":{"post":{"tags":["ğŸ” Authentication","ğŸ” MySQL Authentication"],"summary":"ÄÄƒng xuáº¥t","description":"**ÄÄƒng xuáº¥t vÃ  xÃ³a session**","operationId":"logout_auth_logout_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/me":{"get":{"tags":["ğŸ” Authentication","ğŸ” MySQL Authentication"],"summary":"ThÃ´ng tin user hiá»‡n táº¡i","description":"**Láº¥y thÃ´ng tin user Ä‘ang Ä‘Äƒng nháº­p**","operationId":"get_current_user_info_auth_me_get","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/status":{"get":{"tags":["ğŸ” Authentication","ğŸ” MySQL Authentication"],"summary":"Kiá»ƒm tra tráº¡ng thÃ¡i Ä‘Äƒng nháº­p","description":"**Kiá»ƒm tra user cÃ³ Ä‘ang Ä‘Äƒng nháº­p khÃ´ng (optional)**","operationId":"auth_status_auth_status_get","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/query":{"post":{"tags":["ğŸ‘¤ Nháº­n Diá»‡n KhuÃ´n Máº·t","ğŸ‘¤ Nháº­n Diá»‡n KhuÃ´n Máº·t"],"summary":"Nháº­n diá»‡n khuÃ´n máº·t vá»›i Auto-Add","description":"**Nháº­n diá»‡n khuÃ´n máº·t tá»« áº£nh táº£i lÃªn vá»›i tÃ­nh nÄƒng tá»± Ä‘á»™ng thÃªm má»›i**\n    \n    API nÃ y sáº½:\n    - Nháº­n áº£nh chá»©a khuÃ´n máº·t tá»« ngÆ°á»i dÃ¹ng\n    - TrÃ­ch xuáº¥t Ä‘áº·c trÆ°ng khuÃ´n máº·t tá»« áº£nh\n    - TÃ¬m kiáº¿m khuÃ´n máº·t tÆ°Æ¡ng tá»± trong cÆ¡ sá»Ÿ dá»¯ liá»‡u\n    - **ğŸš€ Tá»° Äá»˜NG THÃŠM Má»šI**: Náº¿u khÃ´ng tÃ¬m tháº¥y (score < 0.5), tá»± Ä‘á»™ng gá»i API `/add_embedding_simple` Ä‘á»ƒ thÃªm ngÆ°á»i má»›i\n    - Tráº£ vá» thÃ´ng tin chi tiáº¿t cá»§a ngÆ°á»i Ä‘Æ°á»£c nháº­n diá»‡n hoáº·c thÃ´ng tin ngÆ°á»i vá»«a Ä‘Æ°á»£c thÃªm\n    \n    **TÃ­nh nÄƒng má»›i:**\n    - ğŸ” **TÃ¬m kiáº¿m trÆ°á»›c**: Kiá»ƒm tra xem cÃ³ ngÆ°á»i phÃ¹ há»£p khÃ´ng\n    - â• **Tá»± Ä‘á»™ng thÃªm**: Náº¿u khÃ´ng tÃ¬m tháº¥y, tá»± Ä‘á»™ng táº¡o profile má»›i vá»›i AI prediction\n    - ğŸ“Š **Thá»‘ng kÃª**: Cho biáº¿t Ä‘Ã¢y lÃ  káº¿t quáº£ tÃ¬m kiáº¿m hay ngÆ°á»i má»›i Ä‘Æ°á»£c thÃªm\n    \n    **LÆ°u Ã½:**\n    - áº¢nh pháº£i chá»©a Ã­t nháº¥t 1 khuÃ´n máº·t rÃµ rÃ ng\n    - Há»— trá»£ cÃ¡c Ä‘á»‹nh dáº¡ng: JPG, PNG, WEBP\n    - KÃ­ch thÆ°á»›c file tá»‘i Ä‘a: 10MB\n    - Threshold nháº­n diá»‡n: 0.5 (cÃ³ thá»ƒ Ä‘iá»u chá»‰nh)","operationId":"query_face_query_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_query_face_query_post"}}},"required":true},"responses":{"200":{"description":"Káº¿t quáº£ nháº­n diá»‡n khuÃ´n máº·t hoáº·c thÃ´ng tin ngÆ°á»i má»›i Ä‘Æ°á»£c thÃªm tá»± Ä‘á»™ng","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/check-spoof":{"post":{"tags":["ğŸ›¡ï¸ Chá»‘ng Giáº£ Máº¡o","ğŸ›¡ï¸ Chá»‘ng Giáº£ Máº¡o"],"summary":"Kiá»ƒm tra khuÃ´n máº·t giáº£ máº¡o","description":"**Kiá»ƒm tra xem khuÃ´n máº·t trong áº£nh cÃ³ pháº£i lÃ  giáº£ máº¡o khÃ´ng**\n    \n    API nÃ y sáº½:\n    - Nháº­n áº£nh chá»©a khuÃ´n máº·t tá»« ngÆ°á»i dÃ¹ng\n    - Sá»­ dá»¥ng DeepFace Ä‘á»ƒ kiá»ƒm tra tÃ­nh thá»±c cá»§a khuÃ´n máº·t\n    - Tráº£ vá» káº¿t quáº£ kiá»ƒm tra cÃ¹ng vá»›i Ä‘á»™ tin cáº­y\n    \n    **Tráº£ vá»:**\n    - success: REAL hoáº·c SPOOF\n    - confidence: Ä‘á»™ tin cáº­y cá»§a káº¿t quáº£ (0-1)\n    \n    **LÆ°u Ã½:**\n    - áº¢nh pháº£i chá»©a Ã­t nháº¥t 1 khuÃ´n máº·t rÃµ rÃ ng\n    - Há»— trá»£ cÃ¡c Ä‘á»‹nh dáº¡ng: JPG, PNG\n    - KÃ­ch thÆ°á»›c file tá»‘i Ä‘a: 10MB","operationId":"check_face_spoofing","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_check_face_spoofing"}}},"required":true},"responses":{"200":{"description":"Káº¿t quáº£ kiá»ƒm tra khuÃ´n máº·t giáº£ máº¡o","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AntiSpoofingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/query_top5":{"post":{"tags":["ğŸ‘¥ Top 5 TÆ°Æ¡ng Tá»±","ğŸ‘¤ Nháº­n Diá»‡n KhuÃ´n Máº·t"],"summary":"Nháº­n diá»‡n khuÃ´n máº·t - Top 5 káº¿t quáº£","description":"**Nháº­n diá»‡n khuÃ´n máº·t vÃ  tráº£ vá» 5 káº¿t quáº£ giá»‘ng nháº¥t**\n    \n    API nÃ y tÆ°Æ¡ng tá»± `/query` nhÆ°ng tráº£ vá» nhiá»u káº¿t quáº£ hÆ¡n:\n    - Nháº­n áº£nh chá»©a khuÃ´n máº·t tá»« ngÆ°á»i dÃ¹ng\n    - TrÃ­ch xuáº¥t Ä‘áº·c trÆ°ng khuÃ´n máº·t\n    - TÃ¬m kiáº¿m 5 khuÃ´n máº·t giá»‘ng nháº¥t trong database\n    - Sáº¯p xáº¿p theo Ä‘á»™ tÆ°Æ¡ng tá»± giáº£m dáº§n\n    - Tráº£ vá» thÃ´ng tin chi tiáº¿t cá»§a tá»«ng káº¿t quáº£\n    \n    **Æ¯u Ä‘iá»ƒm so vá»›i /query:**\n    - CÃ³ nhiá»u lá»±a chá»n káº¿t quáº£\n    - Cho phÃ©p so sÃ¡nh Ä‘á»™ tÆ°Æ¡ng tá»±\n    - PhÃ¹ há»£p khi khÃ´ng cháº¯c cháº¯n vá» identity\n    - Há»— trá»£ manual verification\n    \n    **Káº¿t quáº£ tráº£ vá»:**\n    - Top 5 khuÃ´n máº·t tÆ°Æ¡ng tá»± nháº¥t\n    - Score Ä‘á»™ tÆ°Æ¡ng tá»± cho tá»«ng káº¿t quáº£\n    - ThÃ´ng tin ngÆ°á»i: tÃªn, tuá»•i, giá»›i tÃ­nh, nÆ¡i á»Ÿ\n    - image_id vÃ  Ä‘Æ°á»ng dáº«n áº£nh\n    \n    **LÆ°u Ã½:**\n    - áº¢nh pháº£i chá»©a Ã­t nháº¥t 1 khuÃ´n máº·t rÃµ rÃ ng\n    - Há»— trá»£ Ä‘á»‹nh dáº¡ng: JPG, PNG, WEBP\n    - KÃ­ch thÆ°á»›c file tá»‘i Ä‘a: 10MB","operationId":"query_face_top5_query_top5_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_query_face_top5_query_top5_post"}}},"required":true},"responses":{"200":{"description":"Top 5 káº¿t quáº£ nháº­n diá»‡n khuÃ´n máº·t vá»›i Ä‘á»™ tÆ°Æ¡ng tá»± cao nháº¥t","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/add_embedding_simple":{"post":{"tags":["â• ThÃªm NgÆ°á»i ÄÆ¡n Giáº£n","ğŸš€ ThÃªm ÄÆ¡n Giáº£n (Public)"],"summary":"ThÃªm khuÃ´n máº·t má»›i - Chá»‰ cáº§n áº£nh (Auto Generate All - Public API)","description":"**ğŸš€ API ÄÆ N GIáº¢N CÃ”NG KHAI - Chá»‰ cáº§n upload áº£nh, táº¥t cáº£ thÃ´ng tin khÃ¡c tá»± Ä‘á»™ng táº¡o**\n    \n    âš¡ **KHÃ”NG Cáº¦N AUTHENTICATION** - API cÃ´ng khai cho demo vÃ  test\n    \n    **ğŸ¤– Tá»± Ä‘á»™ng xá»­ lÃ½:**\n    - ğŸ“· **image_id**: Tá»± Ä‘á»™ng táº¡o ID unique\n    - ğŸ—‚ï¸ **image_path**: Tá»± Ä‘á»™ng táº¡o \"image_{id}.jpg\"\n    - ğŸ†” **class_id**: Tá»± Ä‘á»™ng táº¡o ID ngÆ°á»i má»›i\n    - ğŸ‘¤ **ten**: Tá»± Ä‘á»™ng táº¡o \"NgÆ°á»i láº¡ {class_id}\"\n    - ğŸ‚ **tuoi**: Predict tá»« áº£nh báº±ng AI\n    - âš§ï¸ **gioitinh**: Predict tá»« áº£nh báº±ng AI  \n    - ğŸ  **noio**: Máº·c Ä‘á»‹nh \"default\"\n    \n    **Chá»‰ cáº§n:**\n    - ğŸ“ Upload file áº£nh (JPG, PNG, WEBP)\n    \n    **LÆ°u Ã½:**\n    - ğŸš« áº¢nh pháº£i chá»©a Ä‘Ãºng 1 khuÃ´n máº·t rÃµ rÃ ng\n    - ğŸ“ KÃ­ch thÆ°á»›c file tá»‘i Ä‘a: 10MB\n    - ğŸ¤– AI sáº½ tá»± Ä‘á»™ng nháº­n diá»‡n tuá»•i vÃ  giá»›i tÃ­nh\n    - ğŸŒ API cÃ´ng khai - cÃ³ thá»ƒ sá»­ dá»¥ng mÃ  khÃ´ng cáº§n Ä‘Äƒng nháº­p","operationId":"add_embedding_simple_add_embedding_simple_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_add_embedding_simple_add_embedding_simple_post"}}},"required":true},"responses":{"200":{"description":"Káº¿t quáº£ thÃªm khuÃ´n máº·t vá»›i táº¥t cáº£ thÃ´ng tin Ä‘Æ°á»£c tá»± Ä‘á»™ng táº¡o","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/add_embedding":{"post":{"tags":["â• Quáº£n LÃ½ NgÆ°á»i","â• ThÃªm Dá»¯ Liá»‡u (Protected)"],"summary":"ThÃªm khuÃ´n máº·t má»›i vÃ o há»‡ thá»‘ng (Cáº§n MySQL Login)","description":"**ğŸ”’ API Báº¢O Máº¬T - ThÃªm khuÃ´n máº·t vÃ  thÃ´ng tin cÃ¡ nhÃ¢n vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u**\n    \n    âš ï¸ **YÃŠU Cáº¦U AUTHENTICATION:**\n    - **MySQL Login**: Báº¯t buá»™c Ä‘Äƒng nháº­p báº±ng `/auth/login`\n    - **Session Cookie**: Tá»± Ä‘á»™ng gá»­i kÃ¨m sau khi Ä‘Äƒng nháº­p\n    - **Permission**: Cáº§n Ä‘Äƒng nháº­p MySQL Ä‘á»ƒ thá»±c hiá»‡n\n    \n    API nÃ y cho phÃ©p:\n    - ğŸ“· ThÃªm áº£nh khuÃ´n máº·t má»›i vÃ o há»‡ thá»‘ng\n    - ğŸ‘¤ LÆ°u thÃ´ng tin cÃ¡ nhÃ¢n chi tiáº¿t (tÃªn, tuá»•i, giá»›i tÃ­nh, nÆ¡i á»Ÿ)\n    - ğŸ¤– Tá»± Ä‘á»™ng trÃ­ch xuáº¥t Ä‘áº·c trÆ°ng khuÃ´n máº·t\n    - ğŸ”„ Cáº­p nháº­t chá»‰ má»¥c tÃ¬m kiáº¿m FAISS\n    \n    **Quy táº¯c nháº­p liá»‡u:**\n    - âœ… Táº¥t cáº£ cÃ¡c trÆ°á»ng thÃ´ng tin Ä‘á»u báº¯t buá»™c\n    - ğŸ”„ Náº¿u chá»‰ thÃªm áº£nh cho class_id Ä‘Ã£ tá»“n táº¡i, váº«n pháº£i Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin\n    - ğŸ†” image_id pháº£i lÃ  duy nháº¥t trong há»‡ thá»‘ng\n    - ğŸ‘¥ class_id dÃ¹ng Ä‘á»ƒ nhÃ³m cÃ¡c áº£nh cá»§a cÃ¹ng 1 ngÆ°á»i\n    \n    **LÆ°u Ã½ báº£o máº­t:**\n    - ğŸ” API nÃ y Ä‘Æ°á»£c báº£o vá»‡ bá»Ÿi JWT authentication\n    - ğŸ“ Má»i thao tÃ¡c Ä‘Æ°á»£c log láº¡i vá»›i user ID\n    - â±ï¸ Rate limiting Ã¡p dá»¥ng Ä‘á»ƒ chá»‘ng spam\n    - ğŸš« áº¢nh pháº£i chá»©a Ä‘Ãºng 1 khuÃ´n máº·t rÃµ rÃ ng\n    - ğŸ“ Há»— trá»£ Ä‘á»‹nh dáº¡ng: JPG, PNG, WEBP\n    - ğŸ“ KÃ­ch thÆ°á»›c file tá»‘i Ä‘a: 10MB","operationId":"add_embedding_add_embedding_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_add_embedding_add_embedding_post"}}},"required":true},"responses":{"200":{"description":"Káº¿t quáº£ thÃªm khuÃ´n máº·t má»›i vÃ o há»‡ thá»‘ng vá»›i thÃ´ng tin authentication","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/edit_embedding":{"post":{"tags":["âœï¸ Chá»‰nh Sá»­a","âœï¸ Chá»‰nh Sá»­a Dá»¯ Liá»‡u (Protected)"],"summary":"Chá»‰nh sá»­a thÃ´ng tin khuÃ´n máº·t (Cáº§n MySQL Login)","description":"**ğŸ”’ API Báº¢O Máº¬T - Cáº­p nháº­t thÃ´ng tin khuÃ´n máº·t vÃ  áº£nh trong há»‡ thá»‘ng**\n    \n    âš ï¸ **YÃŠU Cáº¦U AUTHENTICATION:**\n    - **MySQL Login**: Báº¯t buá»™c Ä‘Äƒng nháº­p báº±ng `/auth/login`\n    - **Session Cookie**: Tá»± Ä‘á»™ng gá»­i kÃ¨m sau khi Ä‘Äƒng nháº­p\n    - **Permission**: Cáº§n Ä‘Äƒng nháº­p MySQL Ä‘á»ƒ thá»±c hiá»‡n\n    \n    API nÃ y cho phÃ©p:\n    - ğŸ”„ Cáº­p nháº­t áº£nh khuÃ´n máº·t cho image_id Ä‘Ã£ tá»“n táº¡i\n    - ğŸ“‚ Thay Ä‘á»•i Ä‘Æ°á»ng dáº«n áº£nh (image_path)\n    - ğŸ¤– Tá»± Ä‘á»™ng cáº­p nháº­t Ä‘áº·c trÆ°ng khuÃ´n máº·t náº¿u cÃ³ áº£nh má»›i\n    - ğŸ”„ Äá»“ng bá»™ thÃ´ng tin trong chá»‰ má»¥c tÃ¬m kiáº¿m FAISS\n    \n    **CÃ¡ch sá»­ dá»¥ng:**\n    - ğŸ†” **image_id**: Báº¯t buá»™c, pháº£i tá»“n táº¡i trong há»‡ thá»‘ng\n    - ğŸ“‚ **image_path**: TÃ¹y chá»n, Ä‘Æ°á»ng dáº«n má»›i cho áº£nh\n    - ğŸ“· **file**: TÃ¹y chá»n, áº£nh má»›i Ä‘á»ƒ thay tháº¿\n    \n    **LÆ°u Ã½ báº£o máº­t:**\n    - ğŸ” API nÃ y Ä‘Æ°á»£c báº£o vá»‡ bá»Ÿi JWT authentication\n    - ğŸ“ Má»i thao tÃ¡c Ä‘Æ°á»£c log láº¡i vá»›i user ID\n    - â±ï¸ Rate limiting Ã¡p dá»¥ng Ä‘á»ƒ chá»‘ng spam\n    - ğŸ” Pháº£i cung cáº¥p Ã­t nháº¥t image_id Ä‘á»ƒ xÃ¡c Ä‘á»‹nh record\n    - ğŸš« Náº¿u cÃ³ áº£nh má»›i, pháº£i chá»©a Ä‘Ãºng 1 khuÃ´n máº·t rÃµ rÃ ng\n    - ğŸ“ Há»— trá»£ Ä‘á»‹nh dáº¡ng: JPG, PNG, WEBP\n    - ğŸ“ KÃ­ch thÆ°á»›c file tá»‘i Ä‘a: 10MB","operationId":"edit_embedding_edit_embedding_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_edit_embedding_edit_embedding_post"}}},"required":true},"responses":{"200":{"description":"Káº¿t quáº£ cáº­p nháº­t thÃ´ng tin khuÃ´n máº·t vá»›i thÃ´ng tin authentication","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/edit_nguoi":{"post":{"tags":["âœï¸ Chá»‰nh Sá»­a ThÃ´ng Tin NgÆ°á»i","âœï¸ Chá»‰nh Sá»­a ThÃ´ng Tin NgÆ°á»i (Protected)"],"summary":"Chá»‰nh sá»­a thÃ´ng tin ngÆ°á»i (Cáº§n MySQL Login)","description":"**ğŸ”’ API Báº¢O Máº¬T - Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n trong há»‡ thá»‘ng**\n    \n    âš ï¸ **YÃŠU Cáº¦U AUTHENTICATION:**\n    - **MySQL Login**: Báº¯t buá»™c Ä‘Äƒng nháº­p báº±ng `/auth/login`\n    - **JWT Token**: Gá»­i trong header Authorization\n    - **Permission**: Cáº§n Ä‘Äƒng nháº­p MySQL Ä‘á»ƒ thá»±c hiá»‡n\n    \n    API nÃ y cho phÃ©p:\n    - ğŸ“ Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n (tÃªn, tuá»•i, giá»›i tÃ­nh, nÆ¡i á»Ÿ)\n    - ğŸ“· Upload áº£nh má»›i cho ngÆ°á»i Ä‘Ã³\n    - ğŸ”„ Tá»± Ä‘á»™ng cáº­p nháº­t thÃ´ng tin trong cÆ¡ sá»Ÿ dá»¯ liá»‡u\n    \n    **LÆ°u Ã½ báº£o máº­t:**\n    - ğŸ” API nÃ y Ä‘Æ°á»£c báº£o vá»‡ bá»Ÿi MySQL authentication\n    - ğŸ“ Má»i thao tÃ¡c Ä‘Æ°á»£c log láº¡i vá»›i user ID","operationId":"edit_nguoi_api_edit_nguoi_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_edit_nguoi_api_edit_nguoi_post"}}},"required":true},"responses":{"200":{"description":"Káº¿t quáº£ cáº­p nháº­t thÃ´ng tin ngÆ°á»i vá»›i audit log","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/edit-users/{user_id}":{"put":{"tags":["âœï¸ Chá»‰nh Sá»­a ThÃ´ng Tin NgÆ°á»i"],"summary":"Cáº­p nháº­t thÃ´ng tin nhÃ¢n viÃªn (yÃªu cáº§u Ä‘Äƒng nháº­p)","description":"Accepts individual JSON fields (not a single JSON `data` object).\nExample body: {\"full_name\":\"Nguyen Van A\",\"phone\":\"09123...\",\"age\":30}\nAvatar upload is handled by `/edit-users/{user_id}/avatar`.","operationId":"edit_users_edit_users__user_id__put","parameters":[{"required":true,"schema":{"type":"integer","title":"User Id"},"name":"user_id","in":"path"},{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_edit_users_edit_users__user_id__put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/edit-users/{user_id}/shift":{"put":{"tags":["âœï¸ Chá»‰nh Sá»­a ThÃ´ng Tin NgÆ°á»i"],"summary":"Thay Ä‘á»•i ca lÃ m cá»§a nhÃ¢n viÃªn (yÃªu cáº§u Ä‘Äƒng nháº­p)","operationId":"change_shift_edit_users__user_id__shift_put","parameters":[{"required":true,"schema":{"type":"integer","title":"User Id"},"name":"user_id","in":"path"},{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_change_shift_edit_users__user_id__shift_put"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/edit-users/{user_id}/resign":{"put":{"tags":["âœï¸ Chá»‰nh Sá»­a ThÃ´ng Tin NgÆ°á»i"],"summary":"Cho nhÃ¢n viÃªn thÃ´i viá»‡c (yÃªu cáº§u Ä‘Äƒng nháº­p)","operationId":"resign_user_edit_users__user_id__resign_put","parameters":[{"required":true,"schema":{"type":"integer","title":"User Id"},"name":"user_id","in":"path"},{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/delete_class":{"post":{"tags":["âŒ XÃ³a NgÆ°á»i","ğŸ—‘ï¸ XÃ³a Dá»¯ Liá»‡u (Protected)"],"summary":"XÃ³a toÃ n bá»™ thÃ´ng tin má»™t ngÆ°á»i (Cáº§n MySQL Login)","description":"**ğŸ”’ API Báº¢O Máº¬T CAO - XÃ³a táº¥t cáº£ áº£nh vÃ  thÃ´ng tin cá»§a má»™t ngÆ°á»i khá»i há»‡ thá»‘ng**\n    \n    âš ï¸ **YÃŠU Cáº¦U AUTHENTICATION:**\n    - **MySQL Login**: Báº¯t buá»™c Ä‘Äƒng nháº­p báº±ng `/auth/login`\n    - **Session Cookie**: Tá»± Ä‘á»™ng gá»­i kÃ¨m sau khi Ä‘Äƒng nháº­p\n    - **Permission**: Cáº§n Ä‘Äƒng nháº­p MySQL Ä‘á»ƒ thá»±c hiá»‡n\n    \n    ğŸš¨ **Cáº¢NH BÃO - THAO TÃC NGUY HIá»‚M:**\n    \n    API nÃ y sáº½ **XÃ“A VÄ¨NH VIá»„N**:\n    - ğŸ—‘ï¸ Táº¥t cáº£ áº£nh khuÃ´n máº·t thuá»™c class_id Ä‘Ã£ chá»‰ Ä‘á»‹nh\n    - ğŸ”„ Loáº¡i bá» toÃ n bá»™ Ä‘áº·c trÆ°ng khuÃ´n máº·t khá»i chá»‰ má»¥c FAISS\n    - ğŸ‘¤ XÃ³a thÃ´ng tin cÃ¡ nhÃ¢n (tÃªn, tuá»•i, giá»›i tÃ­nh, nÆ¡i á»Ÿ)\n    - ğŸ’¾ Cáº­p nháº­t cÆ¡ sá»Ÿ dá»¯ liá»‡u hoÃ n toÃ n\n    \n    **CÃ¡ch sá»­ dá»¥ng:**\n    - ğŸ†” **class_id**: Báº¯t buá»™c, ID ngÆ°á»i cáº§n xÃ³a hoÃ n toÃ n\n    - âœ… class_id pháº£i tá»“n táº¡i trong há»‡ thá»‘ng\n    \n    **LÆ°u Ã½ báº£o máº­t:**\n    - ğŸ” Chá»‰ ADMIN má»›i cÃ³ quyá»n delete\n    - ğŸ“ Má»i thao tÃ¡c Ä‘Æ°á»£c log chi tiáº¿t vá»›i user ID\n    - âš ï¸ **Thao tÃ¡c nÃ y KHÃ”NG THá»‚ HOÃ€N TÃC**\n    - ğŸ—‘ï¸ Sáº½ xÃ³a **Táº¤T Cáº¢** áº£nh vÃ  thÃ´ng tin liÃªn quan Ä‘áº¿n class_id\n    - ğŸ†š KhÃ¡c vá»›i `/delete_image` chá»‰ xÃ³a 1 áº£nh cá»¥ thá»ƒ\n    - â±ï¸ Rate limiting nghiÃªm ngáº·t Ä‘á»ƒ trÃ¡nh xÃ³a nháº§m hÃ ng loáº¡t\n    \n    **âš ï¸ HÃƒY CHáº®C CHáº®N TRÆ¯á»šC KHI THá»°C HIá»†N!**","operationId":"delete_class_delete_class_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_delete_class_delete_class_post"}}},"required":true},"responses":{"200":{"description":"Káº¿t quáº£ xÃ³a toÃ n bá»™ thÃ´ng tin ngÆ°á»i vá»›i audit log","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/delete_image":{"post":{"tags":["ğŸ—‘ï¸ XÃ³a áº¢nh","ğŸ—‘ï¸ XÃ³a Dá»¯ Liá»‡u (Protected)"],"summary":"XÃ³a áº£nh khuÃ´n máº·t khá»i há»‡ thá»‘ng (Cáº§n MySQL Login)","description":"**ğŸ”’ API Báº¢O Máº¬T - XÃ³a má»™t áº£nh khuÃ´n máº·t cá»¥ thá»ƒ khá»i cÆ¡ sá»Ÿ dá»¯ liá»‡u**\n    \n    âš ï¸ **YÃŠU Cáº¦U AUTHENTICATION:**\n    - **JWT Token**: Báº¯t buá»™c trong header `Authorization: Bearer <token>`\n    - **Permission**: Cáº§n scope `delete` (ADMIN role)\n    - **Rate Limit**: 10 requests/phÃºt\n    \n    API nÃ y sáº½:\n    - ğŸ—‘ï¸ XÃ³a áº£nh khuÃ´n máº·t theo image_id\n    - ğŸ”„ Loáº¡i bá» Ä‘áº·c trÆ°ng khuÃ´n máº·t khá»i chá»‰ má»¥c FAISS\n    - ğŸ’¾ Cáº­p nháº­t cÆ¡ sá»Ÿ dá»¯ liá»‡u\n    - âœ… KhÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c áº£nh khÃ¡c cÃ¹ng class_id\n    \n    **CÃ¡ch sá»­ dá»¥ng:**\n    - ğŸ†” **image_id**: Báº¯t buá»™c, ID áº£nh cáº§n xÃ³a\n    - âœ… image_id pháº£i tá»“n táº¡i trong há»‡ thá»‘ng\n    \n    **LÆ°u Ã½ báº£o máº­t:**\n    - ğŸ” Chá»‰ ADMIN má»›i cÃ³ quyá»n delete\n    - ğŸ“ Má»i thao tÃ¡c Ä‘Æ°á»£c log chi tiáº¿t vá»›i user ID\n    - âš ï¸ **Thao tÃ¡c nÃ y KHÃ”NG THá»‚ HOÃ€N TÃC**\n    - ğŸ¯ Chá»‰ xÃ³a **1 áº£nh cá»¥ thá»ƒ**, khÃ´ng xÃ³a toÃ n bá»™ class\n    - ğŸ‘¥ Náº¿u muá»‘n xÃ³a táº¥t cáº£ áº£nh cá»§a 1 ngÆ°á»i, sá»­ dá»¥ng API `/delete_class`\n    - â±ï¸ Rate limiting Ä‘á»ƒ trÃ¡nh xÃ³a nháº§m hÃ ng loáº¡t\n    \n    **So sÃ¡nh vá»›i delete_class:**\n    - ğŸ–¼ï¸ `delete_image`: XÃ³a 1 áº£nh cá»¥ thá»ƒ\n    - ğŸ‘¤ `delete_class`: XÃ³a toÃ n bá»™ thÃ´ng tin 1 ngÆ°á»i","operationId":"delete_image_delete_image_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_delete_image_delete_image_post"}}},"required":true},"responses":{"200":{"description":"Káº¿t quáº£ xÃ³a áº£nh khuÃ´n máº·t vá»›i audit log","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/vector_info":{"get":{"tags":["ğŸ“Š ThÃ´ng Tin Database","ğŸ“Š TÃ¬m Kiáº¿m & Thá»‘ng KÃª"],"summary":"ThÃ´ng tin chi tiáº¿t vá» vectors","description":"**Xem thÃ´ng tin chi tiáº¿t vá» táº¥t cáº£ vectors trong há»‡ thá»‘ng**\n    \n    API nÃ y cung cáº¥p:\n    - Danh sÃ¡ch táº¥t cáº£ vectors Ä‘Ã£ Ä‘Æ°á»£c lÆ°u trá»¯\n    - Mapping giá»¯a image_id vÃ  vector position trong FAISS\n    - ThÃ´ng tin metadata cá»§a tá»«ng vector\n    - Statistics vá» phÃ¢n bá»‘ vectors\n    - Tráº¡ng thÃ¡i Ä‘á»“ng bá»™ giá»¯a database vÃ  FAISS index\n    \n    **ThÃ´ng tin chi tiáº¿t bao gá»“m:**\n    - vector_count: Tá»•ng sá»‘ vectors\n    - image_id_mapping: Map giá»¯a image_id vÃ  index position\n    - metadata_info: ThÃ´ng tin class_id, image_path cho tá»«ng vector\n    - consistency_check: Kiá»ƒm tra tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u\n    - storage_info: ThÃ´ng tin lÆ°u trá»¯ vÃ  bá»™ nhá»›\n    \n    **á»¨ng dá»¥ng:**\n    - Debug mapping issues\n    - Kiá»ƒm tra data consistency\n    - Database maintenance\n    - Performance analysis\n    - Troubleshooting search problems\n    \n    **LÆ°u Ã½:**\n    - API nÃ y cÃ³ thá»ƒ tráº£ vá» nhiá»u dá»¯ liá»‡u náº¿u há»‡ thá»‘ng cÃ³ nhiá»u vectors\n    - Sá»­ dá»¥ng cáº©n tháº­n vá»›i database lá»›n","operationId":"get_vector_info_vector_info_get","responses":{"200":{"description":"ThÃ´ng tin chi tiáº¿t vá» táº¥t cáº£ vectors trong há»‡ thá»‘ng","content":{"application/json":{"schema":{}}}}}}},"/change-password":{"post":{"tags":["ğŸ” MySQL Authentication"],"summary":"Thay Ä‘á»•i máº­t kháº©u (yÃªu cáº§u Ä‘Äƒng nháº­p)","description":"Protected endpoint: change password for current logged-in user.","operationId":"change_password_change_password_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_change_password_change_password_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/change-pin":{"post":{"tags":["ğŸ” MySQL Authentication"],"summary":"Thay Ä‘á»•i mÃ£ PIN cho ngÆ°á»i (yÃªu cáº§u Ä‘Äƒng nháº­p)","operationId":"change_pin_change_pin_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_change_pin_change_pin_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/edit-users/{user_id}/reset-password":{"post":{"tags":["ğŸ” MySQL Authentication"],"summary":"Reset máº­t kháº©u nhÃ¢n viÃªn vá» máº·c Ä‘á»‹nh (yÃªu cáº§u Ä‘Äƒng nháº­p)","operationId":"reset_password_edit_users__user_id__reset_password_post","parameters":[{"required":true,"schema":{"type":"integer","title":"User Id"},"name":"user_id","in":"path"},{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/get_image_ids_by_class":{"get":{"tags":["ğŸ–¼ï¸ Danh SÃ¡ch áº¢nh","ğŸ“Š TÃ¬m Kiáº¿m & Thá»‘ng KÃª"],"summary":"Láº¥y danh sÃ¡ch áº£nh theo class_id","description":"**Láº¥y táº¥t cáº£ image_id thuá»™c má»™t class_id cá»¥ thá»ƒ**\n    \n    API nÃ y cung cáº¥p:\n    - Danh sÃ¡ch táº¥t cáº£ áº£nh thuá»™c vá» má»™t ngÆ°á»i (class_id)\n    - ThÃ´ng tin chi tiáº¿t tá»«ng áº£nh (image_id, image_path)\n    - Kiá»ƒm tra sá»‘ lÆ°á»£ng áº£nh cá»§a má»—i ngÆ°á»i\n    - Há»— trá»£ quáº£n lÃ½ vÃ  kiá»ƒm tra dá»¯ liá»‡u\n    \n    **Tham sá»‘ Ä‘áº§u vÃ o:**\n    - class_id: ID nhÃ³m ngÆ°á»i cáº§n truy váº¥n\n    \n    **Káº¿t quáº£ tráº£ vá»:**\n    - Danh sÃ¡ch image_id thuá»™c class_id\n    - ÄÆ°á»ng dáº«n áº£nh tÆ°Æ¡ng á»©ng\n    - Tá»•ng sá»‘ áº£nh cá»§a ngÆ°á»i nÃ y\n    - Metadata bá»• sung (náº¿u cÃ³)\n    \n    **á»¨ng dá»¥ng:**\n    - Kiá»ƒm tra sá»‘ lÆ°á»£ng áº£nh cá»§a tá»«ng ngÆ°á»i\n    - Quáº£n lÃ½ dá»¯ liá»‡u training\n    - Debug class mapping\n    - Bulk operations trÃªn áº£nh cá»§a 1 ngÆ°á»i","operationId":"get_image_ids_by_class_api_get_image_ids_by_class_get","parameters":[{"description":"ID nhÃ³m ngÆ°á»i cáº§n truy váº¥n danh sÃ¡ch áº£nh","required":true,"schema":{"type":"string","title":"Class Id","description":"ID nhÃ³m ngÆ°á»i cáº§n truy váº¥n danh sÃ¡ch áº£nh"},"name":"class_id","in":"query"}],"responses":{"200":{"description":"Danh sÃ¡ch áº£nh thuá»™c class_id Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/edit-users/{user_id}/avatar":{"post":{"tags":["âœï¸ Chá»‰nh Sá»­a ThÃ´ng Tin NgÆ°á»i"],"summary":"Cáº­p nháº­t áº£nh Ä‘áº¡i diá»‡n (lÆ°u dáº¡ng BLOB) (yÃªu cáº§u Ä‘Äƒng nháº­p)","operationId":"update_avatar_edit_users__user_id__avatar_post","parameters":[{"required":true,"schema":{"type":"integer","title":"User Id"},"name":"user_id","in":"path"},{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_update_avatar_edit_users__user_id__avatar_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/faces":{"post":{"tags":["â• ThÃªm KhuÃ´n Máº·t"],"summary":"ThÃªm khuÃ´n máº·t cho ngÆ°á»i (áº£nh + user_id) (yÃªu cáº§u Ä‘Äƒng nháº­p)","operationId":"add_face_faces_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_add_face_faces_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/faces/{user_id}":{"get":{"tags":["â• ThÃªm KhuÃ´n Máº·t"],"summary":"Láº¥y danh sÃ¡ch khuÃ´n máº·t cá»§a nhÃ¢n viÃªn (yÃªu cáº§u Ä‘Äƒng nháº­p)","operationId":"list_faces_faces__user_id__get","parameters":[{"required":true,"schema":{"type":"integer","title":"User Id"},"name":"user_id","in":"path"},{"required":false,"schema":{"type":"boolean","title":"Include Image Base64","default":false},"name":"include_image_base64","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/list_nguoi":{"get":{"tags":["ğŸ“‹ Danh SÃ¡ch NgÆ°á»i","ğŸ“Š TÃ¬m Kiáº¿m & Thá»‘ng KÃª"],"summary":"Danh sÃ¡ch thÃ´ng tin ngÆ°á»i trong há»‡ thá»‘ng","description":"**Láº¥y danh sÃ¡ch thÃ´ng tin táº¥t cáº£ ngÆ°á»i Ä‘Ã£ Ä‘Æ°á»£c lÆ°u trong há»‡ thá»‘ng**\n    \n    API nÃ y cung cáº¥p:\n    - Danh sÃ¡ch táº¥t cáº£ ngÆ°á»i trong cÆ¡ sá»Ÿ dá»¯ liá»‡u\n    - ThÃ´ng tin chi tiáº¿t: tÃªn, tuá»•i, giá»›i tÃ­nh, nÆ¡i á»Ÿ, class_id\n    - TÃ­nh nÄƒng tÃ¬m kiáº¿m theo tÃªn\n    - PhÃ¢n trang Ä‘á»ƒ hiá»ƒn thá»‹ hiá»‡u quáº£\n    \n    **Tham sá»‘ tÃ¬m kiáº¿m:**\n    - query: Tá»« khÃ³a tÃ¬m kiáº¿m theo tÃªn (Ä‘á»ƒ trá»‘ng Ä‘á»ƒ hiá»ƒn thá»‹ táº¥t cáº£)\n    - page: Sá»‘ trang hiá»‡n táº¡i (báº¯t Ä‘áº§u tá»« 1)\n    - page_size: Sá»‘ lÆ°á»£ng káº¿t quáº£ má»—i trang (tá»‘i Ä‘a 100)\n    \n    **Káº¿t quáº£ tráº£ vá»:**\n    - Danh sÃ¡ch ngÆ°á»i phÃ¹ há»£p vá»›i Ä‘iá»u kiá»‡n tÃ¬m kiáº¿m\n    - Tá»•ng sá»‘ káº¿t quáº£ tÃ¬m Ä‘Æ°á»£c\n    - ThÃ´ng tin phÃ¢n trang","operationId":"list_nguoi_list_nguoi_get","parameters":[{"description":"Tá»« khÃ³a tÃ¬m kiáº¿m theo tÃªn (Ä‘á»ƒ trá»‘ng Ä‘á»ƒ hiá»ƒn thá»‹ táº¥t cáº£)","required":false,"schema":{"type":"string","title":"Query","description":"Tá»« khÃ³a tÃ¬m kiáº¿m theo tÃªn (Ä‘á»ƒ trá»‘ng Ä‘á»ƒ hiá»ƒn thá»‹ táº¥t cáº£)","default":""},"name":"query","in":"query"},{"description":"Sá»‘ trang hiá»‡n táº¡i (báº¯t Ä‘áº§u tá»« 1)","required":false,"schema":{"type":"integer","minimum":1.0,"title":"Page","description":"Sá»‘ trang hiá»‡n táº¡i (báº¯t Ä‘áº§u tá»« 1)","default":1},"name":"page","in":"query"},{"description":"Sá»‘ lÆ°á»£ng káº¿t quáº£ má»—i trang (1-100)","required":false,"schema":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Page Size","description":"Sá»‘ lÆ°á»£ng káº¿t quáº£ má»—i trang (1-100)","default":15},"name":"page_size","in":"query"},{"description":"Sáº¯p xáº¿p theo: full_name_asc, full_name_desc, age_asc, age_desc, id_asc, id_desc, created_asc, created_desc, updated_asc, updated_desc","required":false,"schema":{"type":"string","title":"Sort By","description":"Sáº¯p xáº¿p theo: full_name_asc, full_name_desc, age_asc, age_desc, id_asc, id_desc, created_asc, created_desc, updated_asc, updated_desc","default":"full_name_asc"},"name":"sort_by","in":"query"}],"responses":{"200":{"description":"Danh sÃ¡ch thÃ´ng tin ngÆ°á»i vá»›i phÃ¢n trang","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/add-emotion":{"post":{"tags":["ğŸ“ Emotion Logs"],"summary":"Gá»­i log cáº£m xÃºc (áº£nh + emotion_type + camera_id + confidence)","operationId":"add_emotion_add_emotion_post","parameters":[{"required":false,"schema":{"type":"string","title":"Current User"},"name":"current_user","in":"query"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_add_emotion_add_emotion_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/system/pin-verify":{"post":{"tags":["ğŸ” PIN"],"summary":"Kiá»ƒm tra mÃ£ PIN há»£p lá»‡","operationId":"pin_verify_system_pin_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_pin_verify_system_pin_verify_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/emotion":{"get":{"tags":["ğŸ“ Emotion Logs"],"summary":"Truy váº¥n emotion logs (lá»c theo user, thá»i gian, cáº£m xÃºc)","operationId":"query_emotion_emotion_get","parameters":[{"required":false,"schema":{"type":"integer","title":"User Id"},"name":"user_id","in":"query"},{"required":false,"schema":{"type":"string","title":"Emotion Type"},"name":"emotion_type","in":"query"},{"required":false,"schema":{"type":"string","title":"Start Ts"},"name":"start_ts","in":"query"},{"required":false,"schema":{"type":"string","title":"End Ts"},"name":"end_ts","in":"query"},{"required":false,"schema":{"type":"integer","title":"Limit","default":100},"name":"limit","in":"query"},{"required":false,"schema":{"type":"integer","title":"Offset","default":0},"name":"offset","in":"query"},{"required":false,"schema":{"type":"boolean","title":"Include Image Base64","default":false},"name":"include_image_base64","in":"query"},{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/search_embeddings":{"get":{"tags":["ğŸ” TÃ¬m Kiáº¿m NÃ¢ng Cao","ğŸ“Š TÃ¬m Kiáº¿m & Thá»‘ng KÃª"],"summary":"TÃ¬m kiáº¿m embedding khuÃ´n máº·t","description":"**TÃ¬m kiáº¿m thÃ´ng tin embedding khuÃ´n máº·t trong cÆ¡ sá»Ÿ dá»¯ liá»‡u**\n    \n    API nÃ y cho phÃ©p:\n    - TÃ¬m kiáº¿m embedding theo image_id, image_path, hoáº·c class_id\n    - Xem chi tiáº¿t thÃ´ng tin lÆ°u trá»¯ cá»§a tá»«ng áº£nh\n    - Kiá»ƒm tra tráº¡ng thÃ¡i dá»¯ liá»‡u trong há»‡ thá»‘ng\n    - Há»— trá»£ phÃ¢n trang Ä‘á»ƒ dá»… quáº£n lÃ½\n    \n    **CÃ¡ch sá»­ dá»¥ng:**\n    - query: Tá»« khÃ³a tÃ¬m kiáº¿m (cÃ³ thá»ƒ lÃ  image_id, Ä‘Æ°á»ng dáº«n áº£nh, hoáº·c class_id)\n    - page: Sá»‘ trang hiá»‡n táº¡i\n    - page_size: Sá»‘ lÆ°á»£ng káº¿t quáº£ má»—i trang\n    \n    **Káº¿t quáº£ tráº£ vá»:**\n    - Danh sÃ¡ch embedding phÃ¹ há»£p\n    - Chi tiáº¿t image_id, image_path, class_id\n    - ThÃ´ng tin phÃ¢n trang\n    - Tá»•ng sá»‘ káº¿t quáº£ tÃ¬m Ä‘Æ°á»£c\n    \n    **á»¨ng dá»¥ng:**\n    - Kiá»ƒm tra dá»¯ liá»‡u Ä‘Ã£ lÆ°u\n    - Debug há»‡ thá»‘ng\n    - Quáº£n lÃ½ cÆ¡ sá»Ÿ dá»¯ liá»‡u","operationId":"search_embeddings_api_route_search_embeddings_get","parameters":[{"description":"Tá»« khÃ³a tÃ¬m kiáº¿m (image_id, image_path, class_id) - Ä‘á»ƒ trá»‘ng Ä‘á»ƒ hiá»ƒn thá»‹ táº¥t cáº£","required":false,"schema":{"type":"string","title":"Query","description":"Tá»« khÃ³a tÃ¬m kiáº¿m (image_id, image_path, class_id) - Ä‘á»ƒ trá»‘ng Ä‘á»ƒ hiá»ƒn thá»‹ táº¥t cáº£","default":""},"name":"query","in":"query"},{"description":"Sá»‘ trang hiá»‡n táº¡i (báº¯t Ä‘áº§u tá»« 1)","required":false,"schema":{"type":"integer","minimum":1.0,"title":"Page","description":"Sá»‘ trang hiá»‡n táº¡i (báº¯t Ä‘áº§u tá»« 1)","default":1},"name":"page","in":"query"},{"description":"Sá»‘ lÆ°á»£ng káº¿t quáº£ má»—i trang (tá»‘i Ä‘a 15)","required":false,"schema":{"type":"integer","maximum":15.0,"minimum":1.0,"title":"Page Size","description":"Sá»‘ lÆ°á»£ng káº¿t quáº£ má»—i trang (tá»‘i Ä‘a 15)","default":15},"name":"page_size","in":"query"},{"description":"Sáº¯p xáº¿p theo: image_id_asc, image_id_desc, class_id_asc, class_id_desc, image_path_asc, image_path_desc, created_asc, created_desc, updated_asc, updated_desc","required":false,"schema":{"type":"string","title":"Sort By","description":"Sáº¯p xáº¿p theo: image_id_asc, image_id_desc, class_id_asc, class_id_desc, image_path_asc, image_path_desc, created_asc, created_desc, updated_asc, updated_desc","default":"image_id_asc"},"name":"sort_by","in":"query"}],"responses":{"200":{"description":"Danh sÃ¡ch embedding khuÃ´n máº·t vá»›i phÃ¢n trang","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/delete-emotion/{emotion_id}":{"delete":{"tags":["ğŸ—‘ï¸ XÃ³a Emotion"],"summary":"XÃ³a má»™t báº£n ghi emotion log (yÃªu cáº§u Ä‘Äƒng nháº­p)","operationId":"delete_emotion_delete_emotion__emotion_id__delete","parameters":[{"required":true,"schema":{"type":"integer","title":"Emotion Id"},"name":"emotion_id","in":"path"},{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/index_status":{"get":{"tags":["ğŸ’¡ Tráº¡ng ThÃ¡i","ğŸ“Š TÃ¬m Kiáº¿m & Thá»‘ng KÃª"],"summary":"Tráº¡ng thÃ¡i chá»‰ má»¥c FAISS","description":"**Kiá»ƒm tra tráº¡ng thÃ¡i chi tiáº¿t cá»§a chá»‰ má»¥c tÃ¬m kiáº¿m FAISS**\n    \n    API nÃ y cung cáº¥p thÃ´ng tin:\n    - Tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng cá»§a FAISS index\n    - Tá»•ng sá»‘ vectors Ä‘Ã£ Ä‘Æ°á»£c lÆ°u trá»¯\n    - Loáº¡i index Ä‘ang sá»­ dá»¥ng (IndexFlatIP, IndexIVFFlat, v.v.)\n    - KÃ­ch thÆ°á»›c embedding (thÆ°á»ng lÃ  512 dimensions)\n    - ThÃ´ng tin bá»™ nhá»› vÃ  hiá»‡u suáº¥t index\n    \n    **Chi tiáº¿t tráº£ vá»:**\n    - index_ready: Index cÃ³ sáºµn sÃ ng Ä‘á»ƒ sá»­ dá»¥ng khÃ´ng\n    - total_vectors: Tá»•ng sá»‘ embedding trong index\n    - index_type: Loáº¡i FAISS index\n    - embedding_dimension: Sá»‘ chiá»u cá»§a vector embedding\n    - memory_usage: Bá»™ nhá»› index Ä‘ang sá»­ dá»¥ng\n    - last_updated: Thá»i gian cáº­p nháº­t gáº§n nháº¥t\n    \n    **á»¨ng dá»¥ng:**\n    - Kiá»ƒm tra tÃ¬nh tráº¡ng index trÆ°á»›c khi query\n    - Monitoring dung lÆ°á»£ng database\n    - Debug cÃ¡c váº¥n Ä‘á» tÃ¬m kiáº¿m\n    - Capacity planning cho FAISS","operationId":"index_status_index_status_get","responses":{"200":{"description":"ThÃ´ng tin chi tiáº¿t vá» tráº¡ng thÃ¡i FAISS index","content":{"application/json":{"schema":{}}}}}}},"/checkin":{"post":{"tags":["ğŸ•’ Check-in"],"summary":"Táº¡o check-in cho user táº¡i thá»i Ä‘iá»ƒm hiá»‡n táº¡i","operationId":"checkin_checkin_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_checkin_checkin_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kpi":{"get":{"tags":["ğŸ“Š KPI"],"summary":"Xem danh sÃ¡ch KPI (lá»c theo ngÃ y hoáº·c thÃ¡ng, theo tÃªn nhÃ¢n viÃªn)","operationId":"get_kpis_kpi_get","parameters":[{"description":"YYYY-MM-DD","required":false,"schema":{"type":"string","title":"Date","description":"YYYY-MM-DD"},"name":"date","in":"query"},{"description":"YYYY-MM","required":false,"schema":{"type":"string","title":"Month","description":"YYYY-MM"},"name":"month","in":"query"},{"required":false,"schema":{"type":"string","title":"Full Name"},"name":"full_name","in":"query"},{"required":false,"schema":{"type":"integer","title":"Limit","default":100},"name":"limit","in":"query"},{"required":false,"schema":{"type":"integer","title":"Offset","default":0},"name":"offset","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kpi/{user_id}":{"get":{"tags":["ğŸ“Š KPI"],"summary":"Xem chi tiáº¿t KPI cá»§a nhÃ¢n viÃªn","operationId":"get_kpis_for_user_kpi__user_id__get","parameters":[{"required":true,"schema":{"type":"integer","title":"User Id"},"name":"user_id","in":"path"},{"description":"YYYY-MM-DD","required":false,"schema":{"type":"string","title":"Date","description":"YYYY-MM-DD"},"name":"date","in":"query"},{"description":"YYYY-MM","required":false,"schema":{"type":"string","title":"Month","description":"YYYY-MM"},"name":"month","in":"query"},{"required":false,"schema":{"type":"integer","title":"Limit","default":100},"name":"limit","in":"query"},{"required":false,"schema":{"type":"integer","title":"Offset","default":0},"name":"offset","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reset_index":{"post":{"tags":["ğŸ”„ Reset Database","ğŸ—‘ï¸ XÃ³a Dá»¯ Liá»‡u (Protected)"],"summary":"Khá»Ÿi táº¡o láº¡i chá»‰ má»¥c tÃ¬m kiáº¿m (Cáº§n MySQL Login)","description":"**ğŸ”’ API Báº¢O Máº¬T Cá»°C Ká»² NGUY HIá»‚M - XÃ³a toÃ n bá»™ dá»¯ liá»‡u vÃ  khá»Ÿi táº¡o láº¡i há»‡ thá»‘ng tá»« Ä‘áº§u**\n    \n    âš ï¸ **YÃŠU Cáº¦U AUTHENTICATION:**\n    - **JWT Token**: Báº¯t buá»™c trong header `Authorization: Bearer <token>`\n    - **Permission**: Cáº§n scope `delete` (CHá»ˆ ADMIN)\n    - **Rate Limit**: 1 request/giá» (giá»›i háº¡n Cá»°C Ká»² NGHIÃŠM NGáº¶T)\n    \n    ğŸš¨ **Cáº¢NH BÃO Cá»°C Ká»² NGUY HIá»‚M - API NUCLEAR:**\n    \n    API nÃ y sáº½ **XÃ“A TOÃ€N Bá»˜ Há»† THá»NG**:\n    - ğŸ’¥ XÃ³a toÃ n bá»™ chá»‰ má»¥c tÃ¬m kiáº¿m FAISS\n    - ğŸ—‘ï¸ XÃ³a **Táº¤T Cáº¢** dá»¯ liá»‡u embedding Ä‘Ã£ lÆ°u\n    - ğŸ‘¥ XÃ³a **Táº¤T Cáº¢** thÃ´ng tin ngÆ°á»i trong cÆ¡ sá»Ÿ dá»¯ liá»‡u\n    - ğŸ”„ Khá»Ÿi táº¡o láº¡i há»‡ thá»‘ng vá» tráº¡ng thÃ¡i ban Ä‘áº§u (TRá»NG HOÃ€N TOÃ€N)\n    \n    **ğŸš¨ Cáº¢NH BÃO CUá»I CÃ™NG:**\n    - âš ï¸ **THAO TÃC NÃ€Y Sáº¼ XÃ“A Táº¤T Cáº¢ Dá»® LIá»†U**\n    - ğŸš« **KHÃ”NG THá»‚ HOÃ€N TÃC** sau khi thá»±c hiá»‡n\n    - ğŸŒªï¸ Há»‡ thá»‘ng sáº½ trá»Ÿ vá» tráº¡ng thÃ¡i **TRá»NG HOÃ€N TOÃ€N**\n    - ğŸ‘‘ **CHá»ˆ ADMIN** má»›i cÃ³ quyá»n thá»±c hiá»‡n\n    \n    **Sá»­ dá»¥ng khi nÃ o:**\n    - ğŸ†• Khá»Ÿi táº¡o há»‡ thá»‘ng láº§n Ä‘áº§u\n    - ğŸ“Š Reset toÃ n bá»™ Ä‘á»ƒ import dá»¯ liá»‡u má»›i\n    - ğŸ”§ Kháº¯c phá»¥c lá»—i chá»‰ má»¥c bá»‹ há»ng nghiÃªm trá»ng\n    - ğŸ§ª Testing vÃ  development (mÃ´i trÆ°á»ng dev)\n    \n    **LÆ°u Ã½ báº£o máº­t:**\n    - ğŸ” CHá»ˆ ADMIN cáº¥p cao nháº¥t má»›i cÃ³ quyá»n\n    - ğŸ“ Má»i thao tÃ¡c Ä‘Æ°á»£c log chi tiáº¿t vá»›i thá»i gian chÃ­nh xÃ¡c\n    - â±ï¸ Rate limiting cá»±c ká»³ nghiÃªm ngáº·t (1 láº§n/giá»)\n    - ğŸš¨ Sáº½ cÃ³ audit trail chi tiáº¿t cho thao tÃ¡c nguy hiá»ƒm nÃ y\n    \n    **âš ï¸âš ï¸âš ï¸ HÃƒY Cá»°C Ká»² CHáº®C CHáº®N TRÆ¯á»šC KHI THá»°C HIá»†N! âš ï¸âš ï¸âš ï¸**","operationId":"reset_index_api_reset_index_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"responses":{"200":{"description":"Káº¿t quáº£ khá»Ÿi táº¡o láº¡i há»‡ thá»‘ng vá»›i audit log chi tiáº¿t","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users":{"get":{"tags":["ğŸ“‹ Danh SÃ¡ch NgÆ°á»i"],"summary":"Láº¥y danh sÃ¡ch nhÃ¢n viÃªn (lá»c theo tÃªn, tráº¡ng thÃ¡i, ca)","operationId":"get_users_users_get","parameters":[{"description":"TÃ¬m theo tÃªn/Ä‘á»‹a chá»‰/phone/...","required":false,"schema":{"type":"string","title":"Query","description":"TÃ¬m theo tÃªn/Ä‘á»‹a chá»‰/phone/..."},"name":"query","in":"query"},{"description":"Lá»c theo tráº¡ng thÃ¡i (vÃ­ dá»¥ 'working')","required":false,"schema":{"type":"string","title":"Status","description":"Lá»c theo tráº¡ng thÃ¡i (vÃ­ dá»¥ 'working')"},"name":"status","in":"query"},{"description":"Lá»c theo ca lÃ m (vÃ­ dá»¥ 'day')","required":false,"schema":{"type":"string","title":"Shift","description":"Lá»c theo ca lÃ m (vÃ­ dá»¥ 'day')"},"name":"shift","in":"query"},{"required":false,"schema":{"type":"integer","minimum":1.0,"title":"Page","default":1},"name":"page","in":"query"},{"required":false,"schema":{"type":"integer","maximum":200.0,"minimum":1.0,"title":"Page Size","default":15},"name":"page_size","in":"query"},{"required":false,"schema":{"type":"string","title":"Sort By","default":"full_name_asc"},"name":"sort_by","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}":{"get":{"tags":["ğŸ“‹ Danh SÃ¡ch NgÆ°á»i"],"summary":"Xem thÃ´ng tin chi tiáº¿t nhÃ¢n viÃªn","operationId":"get_user_detail_users__user_id__get","parameters":[{"required":true,"schema":{"type":"integer","title":"User Id"},"name":"user_id","in":"path"},{"description":"Bao gá»“m áº£nh avatar base64","required":false,"schema":{"type":"boolean","title":"Include Avatar Base64","description":"Bao gá»“m áº£nh avatar base64","default":false},"name":"include_avatar_base64","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/add-users":{"post":{"tags":["â• Quáº£n LÃ½ NgÆ°á»i"],"summary":"ThÃªm má»›i nhÃ¢n viÃªn (yÃªu cáº§u Ä‘Äƒng nháº­p)","operationId":"add_users_add_users_post","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_add_users_add_users_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/checklog":{"get":{"tags":["ğŸ•’ Checklog"],"summary":"Xem danh sÃ¡ch cháº¥m cÃ´ng (lá»c theo ngÃ y, tÃªn, tráº¡ng thÃ¡i)","operationId":"get_checklogs_checklog_get","parameters":[{"required":false,"schema":{"type":"string","title":"Date"},"name":"date","in":"query"},{"required":false,"schema":{"type":"string","title":"Date From"},"name":"date_from","in":"query"},{"required":false,"schema":{"type":"string","title":"Date To"},"name":"date_to","in":"query"},{"required":false,"schema":{"type":"string","title":"Full Name"},"name":"full_name","in":"query"},{"required":false,"schema":{"type":"string","title":"Status"},"name":"status","in":"query"},{"required":false,"schema":{"type":"integer","title":"Limit","default":100},"name":"limit","in":"query"},{"required":false,"schema":{"type":"integer","title":"Offset","default":0},"name":"offset","in":"query"},{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/edit-checklog/{id}":{"put":{"tags":["âœï¸ Edit Checklog"],"summary":"Chá»‰nh sá»­a checklog theo id (status)","operationId":"edit_checklog_id_edit_checklog__id__put","parameters":[{"required":true,"schema":{"type":"integer","title":"Id"},"name":"id","in":"path"},{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_edit_checklog_id_edit_checklog__id__put"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/edit-checklog":{"put":{"tags":["âœï¸ Edit Checklog"],"summary":"Chá»‰nh sá»­a checklog theo user_id + date","operationId":"edit_checklog_user_date_edit_checklog_put","parameters":[{"required":false,"schema":{"type":"string","title":"Authorization"},"name":"authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_edit_checklog_user_date_edit_checklog_put"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/predict":{"post":{"tags":["ğŸ¤– Dá»± ÄoÃ¡n","ğŸ§‘â€ğŸ¦± Dá»± Ä‘oÃ¡n tuá»•i & giá»›i tÃ­nh"],"summary":"Dá»± Ä‘oÃ¡n tuá»•i vÃ  giá»›i tÃ­nh tá»« áº£nh khuÃ´n máº·t","description":"**Dá»± Ä‘oÃ¡n tuá»•i vÃ  giá»›i tÃ­nh tá»« áº£nh táº£i lÃªn**\n\t- Nháº­n áº£nh khuÃ´n máº·t tá»« ngÆ°á»i dÃ¹ng\n\t- Tráº£ vá» tuá»•i vÃ  giá»›i tÃ­nh dá»± Ä‘oÃ¡n\n\t- Há»— trá»£ JPG, PNG, JPEG","operationId":"predict_face_predict_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_predict_face_predict_post"}}},"required":true},"responses":{"200":{"description":"Káº¿t quáº£ dá»± Ä‘oÃ¡n tuá»•i vÃ  giá»›i tÃ­nh","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"tags":["â¤ï¸ Sá»©c Khá»e","ğŸ¥ Health Check"],"summary":"Kiá»ƒm tra sá»©c khá»e há»‡ thá»‘ng","description":"**Kiá»ƒm tra tráº¡ng thÃ¡i cÆ¡ báº£n cá»§a há»‡ thá»‘ng**\n    \n    API nÃ y cung cáº¥p:\n    - Tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng cá»§a server\n    - Thá»i gian pháº£n há»“i há»‡ thá»‘ng\n    - TÃ¬nh tráº¡ng káº¿t ná»‘i cÆ¡ báº£n\n    - ThÃ´ng tin uptime\n    \n    **Káº¿t quáº£ tráº£ vá»:**\n    - status: healthy/unhealthy\n    - timestamp: Thá»i gian kiá»ƒm tra\n    - uptime: Thá»i gian hoáº¡t Ä‘á»™ng\n    - server_info: ThÃ´ng tin cÆ¡ báº£n vá» server\n    \n    **Má»¥c Ä‘Ã­ch sá»­ dá»¥ng:**\n    - Monitoring há»‡ thá»‘ng\n    - Load balancer health check\n    - Kiá»ƒm tra tÃ¬nh tráº¡ng trÆ°á»›c khi gá»­i request\n    - Debug káº¿t ná»‘i","operationId":"health_check_health_get","responses":{"200":{"description":"Há»‡ thá»‘ng hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng","content":{"application/json":{"schema":{}}}},"503":{"description":"Há»‡ thá»‘ng gáº·p sá»± cá»‘"}}}},"/health/detailed":{"get":{"tags":["â¤ï¸ Sá»©c Khá»e","ğŸ¥ Health Check"],"summary":"Kiá»ƒm tra sá»©c khá»e chi tiáº¿t","description":"**Kiá»ƒm tra tráº¡ng thÃ¡i chi tiáº¿t vÃ  hiá»‡u suáº¥t há»‡ thá»‘ng**\n    \n    API nÃ y cung cáº¥p thÃ´ng tin toÃ n diá»‡n:\n    - Táº¥t cáº£ thÃ´ng tin tá»« health check cÆ¡ báº£n\n    - Metrics hiá»‡u suáº¥t chi tiáº¿t (CPU, RAM, response time)\n    - ThÃ´ng tin FAISS index (sá»‘ vectors, loáº¡i index)\n    - Tráº¡ng thÃ¡i cÃ¡c service ná»™i bá»™\n    - Statistics vá» sá»‘ lÆ°á»£ng request Ä‘Ã£ xá»­ lÃ½\n    \n    **ThÃ´ng tin chi tiáº¿t bao gá»“m:**\n    - performance_metrics: CPU, memory usage, avg response time\n    - faiss_info: Tá»•ng sá»‘ vectors, loáº¡i index, tráº¡ng thÃ¡i sáºµn sÃ ng\n    - request_stats: Sá»‘ lÆ°á»£ng request Ä‘Ã£ xá»­ lÃ½, tá»· lá»‡ thÃ nh cÃ´ng\n    - system_resources: TÃ¬nh tráº¡ng tÃ i nguyÃªn há»‡ thá»‘ng\n    \n    **á»¨ng dá»¥ng:**\n    - Monitoring hiá»‡u suáº¥t chi tiáº¿t\n    - Debugging khi cÃ³ váº¥n Ä‘á»\n    - Capacity planning\n    - Performance optimization","operationId":"detailed_health_check_health_detailed_get","responses":{"200":{"description":"ThÃ´ng tin chi tiáº¿t há»‡ thá»‘ng","content":{"application/json":{"schema":{}}}},"503":{"description":"Há»‡ thá»‘ng gáº·p sá»± cá»‘ vá»›i thÃ´ng tin chi tiáº¿t"}}}},"/health/readiness":{"get":{"tags":["â¤ï¸ Sá»©c Khá»e"],"summary":"Readiness Check","description":"Readiness check cho Kubernetes/Docker","operationId":"readiness_check_health_readiness_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/liveness":{"get":{"tags":["â¤ï¸ Sá»©c Khá»e"],"summary":"Liveness Check","description":"Liveness check cho Kubernetes/Docker","operationId":"liveness_check_health_liveness_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/checkout":{"post":{"tags":["ğŸ•’ Checkout"],"summary":"Do Checkout","operationId":"do_checkout_checkout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/checkout/{id}":{"post":{"tags":["ğŸ•’ Checkout"],"summary":"Checkout user by id","operationId":"do_checkout_for_user_checkout__id__post","parameters":[{"required":true,"schema":{"type":"integer","title":"Id"},"name":"id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"tags":["ğŸ  Trang Chá»§"],"summary":"Read Root","description":"## ğŸ  Trang Chá»§ API\n\nChÃ o má»«ng Ä‘áº¿n vá»›i **Há»‡ Thá»‘ng Nháº­n Diá»‡n KhuÃ´n Máº·t**!\n\n### ğŸš€ Báº¯t Äáº§u Nhanh\n1. **TÃ¬m kiáº¿m**: Thá»­ `/query` Ä‘á»ƒ tÃ¬m khuÃ´n máº·t\n2. **ÄÄƒng nháº­p**: DÃ¹ng `/auth/login` vá»›i MySQL account\n3. **KhÃ¡m phÃ¡**: Xem cÃ¡c API categories bÃªn trÃ¡i\n\n### ğŸ“š TÃ i Liá»‡u\n- **Swagger UI**: Trang nÃ y (interactive)\n- **ReDoc**: `/redoc` (detailed docs)\n- **OpenAPI Schema**: `/openapi.json`","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AntiSpoofingResponse":{"properties":{"success":{"type":"string","title":"Success"},"is_spoof":{"type":"boolean","title":"Is Spoof"},"confidence":{"type":"number","title":"Confidence"},"method":{"type":"string","title":"Method"},"error":{"type":"string","title":"Error"}},"type":"object","required":["success","is_spoof","confidence"],"title":"AntiSpoofingResponse"},"Body_add_embedding_add_embedding_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"File áº£nh khuÃ´n máº·t cáº§n thÃªm vÃ o há»‡ thá»‘ng (JPG, PNG, WEBP)"},"image_id":{"type":"integer","title":"Image Id","description":"ID duy nháº¥t cho áº£nh"},"image_path":{"type":"string","title":"Image Path","description":"ÄÆ°á»ng dáº«n lÆ°u trá»¯ áº£nh"},"class_id":{"type":"integer","title":"Class Id","description":"ID nhÃ³m ngÆ°á»i"},"full_name":{"type":"string","title":"Full Name","description":"TÃªn Ä‘áº§y Ä‘á»§"},"gender":{"type":"boolean","title":"Gender","description":"Giá»›i tÃ­nh (true=Nam, false=Ná»¯)"},"age":{"type":"integer","title":"Age","description":"Tuá»•i"},"address":{"type":"string","title":"Address","description":"NÆ¡i á»Ÿ/Ä‘á»‹a chá»‰"}},"type":"object","required":["file","image_id","image_path","class_id","full_name","gender","age","address"],"title":"Body_add_embedding_add_embedding_post"},"Body_add_embedding_simple_add_embedding_simple_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"File áº£nh khuÃ´n máº·t (JPG, PNG, WEBP) - Táº¥t cáº£ thÃ´ng tin khÃ¡c tá»± Ä‘á»™ng táº¡o"}},"type":"object","required":["file"],"title":"Body_add_embedding_simple_add_embedding_simple_post"},"Body_add_emotion_add_emotion_post":{"properties":{"user_id":{"type":"integer","title":"User Id"},"camera_id":{"type":"integer","title":"Camera Id"},"emotion_type":{"type":"string","title":"Emotion Type"},"confidence":{"type":"number","title":"Confidence"},"image":{"type":"string","format":"binary","title":"Image"},"note":{"type":"string","title":"Note"}},"type":"object","required":["emotion_type","confidence"],"title":"Body_add_emotion_add_emotion_post"},"Body_add_face_faces_post":{"properties":{"user_id":{"type":"integer","title":"User Id"},"image":{"type":"string","format":"binary","title":"Image"}},"type":"object","required":["user_id","image"],"title":"Body_add_face_faces_post"},"Body_add_users_add_users_post":{"properties":{"full_name":{"type":"string","title":"Full Name"},"age":{"type":"integer","title":"Age"},"phone":{"type":"string","title":"Phone"},"shift":{"type":"string","title":"Shift","default":"day"},"address":{"type":"string","title":"Address"},"gender":{"type":"string","title":"Gender"},"role":{"type":"string","title":"Role","default":"user"},"pin":{"type":"string","title":"Pin"},"avatar":{"type":"string","format":"binary","title":"Avatar"}},"type":"object","required":["full_name"],"title":"Body_add_users_add_users_post"},"Body_change_password_change_password_post":{"properties":{"current_password":{"type":"string","title":"Current Password"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["current_password","new_password"],"title":"Body_change_password_change_password_post"},"Body_change_pin_change_pin_post":{"properties":{"old_pin":{"type":"string","title":"Old Pin","description":"MÃ£ PIN hiá»‡n táº¡i"},"new_pin":{"type":"string","title":"New Pin","description":"MÃ£ PIN má»›i"}},"type":"object","required":["old_pin","new_pin"],"title":"Body_change_pin_change_pin_post"},"Body_change_shift_edit_users__user_id__shift_put":{"properties":{"new_shift":{"type":"string","title":"New Shift"}},"type":"object","required":["new_shift"],"title":"Body_change_shift_edit_users__user_id__shift_put"},"Body_check_face_spoofing":{"properties":{"image":{"type":"string","format":"binary","title":"Image","description":"File áº£nh chá»©a khuÃ´n máº·t cáº§n kiá»ƒm tra (JPG, PNG)"}},"type":"object","required":["image"],"title":"Body_check_face_spoofing"},"Body_checkin_checkin_post":{"properties":{"user_id":{"type":"integer","title":"User Id"},"note":{"type":"string","title":"Note"}},"type":"object","required":["user_id"],"title":"Body_checkin_checkin_post"},"Body_delete_class_delete_class_post":{"properties":{"class_id":{"type":"integer","title":"Class Id","description":"ID nhÃ³m ngÆ°á»i cáº§n xÃ³a"}},"type":"object","required":["class_id"],"title":"Body_delete_class_delete_class_post"},"Body_delete_image_delete_image_post":{"properties":{"image_id":{"type":"integer","title":"Image Id","description":"ID áº£nh cáº§n xÃ³a"}},"type":"object","required":["image_id"],"title":"Body_delete_image_delete_image_post"},"Body_edit_checklog_id_edit_checklog__id__put":{"properties":{"status":{"type":"string","title":"Status"},"note":{"type":"string","title":"Note"}},"type":"object","required":["status"],"title":"Body_edit_checklog_id_edit_checklog__id__put"},"Body_edit_checklog_user_date_edit_checklog_put":{"properties":{"user_id":{"type":"integer","title":"User Id"},"date":{"type":"string","title":"Date"},"status":{"type":"string","title":"Status"},"note":{"type":"string","title":"Note"}},"type":"object","required":["user_id","date","status"],"title":"Body_edit_checklog_user_date_edit_checklog_put"},"Body_edit_embedding_edit_embedding_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"File áº£nh má»›i Ä‘á»ƒ thay tháº¿ (tÃ¹y chá»n - JPG, PNG, WEBP)"},"image_id":{"type":"integer","title":"Image Id","description":"ID áº£nh cáº§n chá»‰nh sá»­a"},"image_path":{"type":"string","title":"Image Path","description":"ÄÆ°á»ng dáº«n áº£nh má»›i (tÃ¹y chá»n)"}},"type":"object","required":["image_id"],"title":"Body_edit_embedding_edit_embedding_post"},"Body_edit_nguoi_api_edit_nguoi_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"File áº£nh má»›i (tÃ¹y chá»n - JPG, PNG, WEBP)"},"class_id":{"type":"string","title":"Class Id","description":"ID nhÃ³m ngÆ°á»i cáº§n chá»‰nh sá»­a"},"full_name":{"type":"string","title":"Full Name","description":"TÃªn Ä‘áº§y Ä‘á»§ cá»§a ngÆ°á»i"},"gender":{"type":"string","title":"Gender","description":"Giá»›i tÃ­nh (Nam/Ná»¯)"},"age":{"type":"integer","title":"Age","description":"Tuá»•i cá»§a ngÆ°á»i"},"address":{"type":"string","title":"Address","description":"NÆ¡i á»Ÿ/Ä‘á»‹a chá»‰ cá»§a ngÆ°á»i"}},"type":"object","required":["class_id","full_name","gender","age","address"],"title":"Body_edit_nguoi_api_edit_nguoi_post"},"Body_edit_users_edit_users__user_id__put":{"properties":{"full_name":{"type":"string","title":"Full Name"},"age":{"type":"integer","title":"Age"},"address":{"type":"string","title":"Address"},"phone":{"type":"string","title":"Phone"},"gender":{"type":"string","title":"Gender"},"role":{"type":"string","title":"Role"},"shift":{"type":"string","title":"Shift"},"status":{"type":"string","title":"Status"},"pin":{"type":"string","title":"Pin"}},"type":"object","title":"Body_edit_users_edit_users__user_id__put"},"Body_login_auth_login_post":{"properties":{"username":{"type":"string","title":"Username","description":"Username trong MySQL table taikhoan"},"password":{"type":"string","title":"Password","description":"Password trong MySQL table taikhoan"}},"type":"object","required":["username","password"],"title":"Body_login_auth_login_post"},"Body_pin_verify_system_pin_verify_post":{"properties":{"user_id":{"type":"integer","title":"User Id"},"username":{"type":"string","title":"Username"},"pin":{"type":"string","title":"Pin"}},"type":"object","required":["pin"],"title":"Body_pin_verify_system_pin_verify_post"},"Body_predict_face_predict_post":{"properties":{"image":{"type":"string","format":"binary","title":"Image","description":"File áº£nh khuÃ´n máº·t (JPG, PNG, JPEG)"}},"type":"object","required":["image"],"title":"Body_predict_face_predict_post"},"Body_query_face_query_post":{"properties":{"image":{"type":"string","format":"binary","title":"Image","description":"File áº£nh chá»©a khuÃ´n máº·t cáº§n nháº­n diá»‡n (JPG, PNG, WEBP)"}},"type":"object","required":["image"],"title":"Body_query_face_query_post"},"Body_query_face_top5_query_top5_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"File áº£nh chá»©a khuÃ´n máº·t cáº§n nháº­n diá»‡n (JPG, PNG, WEBP)"}},"type":"object","required":["file"],"title":"Body_query_face_top5_query_top5_post"},"Body_update_avatar_edit_users__user_id__avatar_post":{"properties":{"avatar":{"type":"string","format":"binary","title":"Avatar"}},"type":"object","required":["avatar"],"title":"Body_update_avatar_edit_users__user_id__avatar_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"username":{"type":"string","title":"Username"},"token":{"type":"string","title":"Token"}},"type":"object","required":["success","message","username","token"],"title":"LoginResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}